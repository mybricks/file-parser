!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["file-parser"]=e():t["file-parser"]=e()}(this,(function(){return function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";function n(t,...e){e.forEach(e=>{e&&e.forEach((o,n)=>{t(o,n,e)})})}o.r(e),o.d(e,"getJSONFromModule",(function(){return f})),o.d(e,"getJSONFromRXUIFile",(function(){return d})),o.d(e,"parseFromRXUIFile",(function(){return u}));function r(t){let e;const o=[];for(let o in t)if("xg.desn.stageview"===o){e=c(t[o]).mainModule}const n=t=>{t.comAry&&t.comAry.forEach(t=>{const e=t.runtime.def;if(e){const t=e.namespace+"@"+e.version;o.indexOf(t)<=0&&o.push(t)}t.slots&&t.slots.forEach(t=>{n(t)})})};return e.slot.slots.forEach(t=>{n(t)}),{mainModule:{slot:e.slot.slots[0],frame:e.frame.frames[0]},requireComs:o}}let i,s;function c(t){if("object"!=typeof t||"object"!=typeof t.def||"object"!=typeof t.refs)throw new Error("Invalid data format.");const{def:e,refs:o,D:n}=t;if(n)if(n.W){const t={};Object.keys(n.W).forEach(e=>{t[n.W[e]]=e}),n.W=t,i=n}else i=Object.assign({W:{}},n);else i={C:{},W:{}};s={refs:o,didMap:{}};return function t(e,o){const{refs:n,didMap:r}=s;if(Array.isArray(e))return e.map(e=>t(e));if("object"==typeof e&&e){if(e._hc_)return r[e._hc_]=o||e,o||e;const s=e._R_;if("string"==typeof s){if(!o&&r[s])return r[s];e=n[s],r[s]=o||e}let c,f;(f=e._F_)&&(c=function(){}),delete e._F_;let d=function(t,e){let o=[];do{if(t==Object.prototype||t==Function.prototype)break;try{o=o.concat(Object.getOwnPropertyNames(t))}catch(t){console.error(t)}}while(t=Object.getPrototypeOf(t));return o.filter(o=>{if(!e||e&&"function"!=typeof t[o])return"constructor"!=o&&!/^__.+/g.test(o)})}(e);if(d.length>0){const o=e._ignore_;d.forEach(n=>{let r=i.W[n],s=e[n];if(r?(e[n]=void 0,delete e[n]):r=n,"_ignore_"===n)return;const c=function(t,e){let o=Object.getOwnPropertyDescriptor(t,e);if(void 0===o){let n=t;for(;void 0===o&&null!=(n=Object.getPrototypeOf(n))&&n!==Object.prototype;)o=Object.getOwnPropertyDescriptor(n,e)}return o}(e,r);if(!(c&&c.get&&!c.set||o&&o[r]||o&&o[r])){o&&console.log(r);const n=t(s);try{e[r]=n}catch(t){throw t}}})}}return e}(e)}function f(t){return function({slot:t,frame:e}){let o;const r=t=>{if(t.comAry){const e=[];return t.comAry.forEach(t=>{let o;t.slots&&(o={},t.slots.forEach(t=>{const e=r(t);e&&(o[t.id]=e)})),e.push({id:t.id,def:t.runtime.def,slots:o})}),{comAry:e,style:t.style}}};o=r(t);const i=[],s=[],c=[],f={},d={},u={},p={},a={},l=(t,e)=>{if(t.rels&&(f[`${e}-${t.hostId}`]=t.rels),t.proxyPin){const o=t.proxyPin.parent;if(0===o._type){const n=o.id;d[`${e}-${t.hostId}`]={type:"frame",frameId:n,pinId:t.proxyPin.hostId}}}},y=(t,e)=>{if(t.conAry){const o=[];t.conAry.forEach(t=>{var e;const n=t.finishPin;if(!n)return;const r=n.parent;if(1===r._type)o.push({type:"com",startPinParentKey:t.startPinParentKey,finishPinParentKey:t.finishPinParentKey,comId:r.id,def:r.runtime.def,pinId:n.hostId,pinType:n.type,direction:n.direction,extBinding:n.extBinding});else{let t;t=n.forkedFrom?n.forkedFrom:n;const r=t.parent;if(0===r._type){const n=t.forkedAsJoint;if(n){const t={type:"frame",frameId:r.id,comId:r.parent?r.parent.id:void 0,pinId:n.hostId,pinType:n.type,direction:n.direction};o.push(t);const e=`${t.comId?t.comId+"-":""}${t.frameId}`;y(n,e)}else{const n=1===(null===(e=r.parent)||void 0===e?void 0:e._type)?r.parent.id:void 0;o.push({type:"frame",frameId:r.id,comId:n,pinId:t.hostId,pinType:t.type,direction:t.direction})}}}}),o.length>0&&(u[`${e}-${t.hostId}`]=o)}},m=t=>{t.inputPins&&t.inputPins.forEach(e=>{let o;o=t.parent&&1===t.parent._type?`${t.parent.id}-${t.id}`:t.parent?t.id:"_rootFrame_",y(e,o),l(e,o),t.parent||s.push({id:e.hostId,title:e.title,type:e.type,schema:e.schema,extValues:e.extValues})}),t.outputPins&&t.outputPins.forEach(e=>{t.parent||c.push({id:e.hostId,title:e.title,type:e.type,schema:e.schema})}),t.comAry&&t.comAry.forEach(e=>{var o,r;const s=e.runtime.def;i.find(t=>t.namespace===s.namespace&&t.version===s.version)||i.push(s);const c=[],f=[],d=[],u=e.runtime.geo;if(p[e.id]={def:s,frameId:t.parent?t.id:void 0,parentComId:null===(o=t.parent)||void 0===o?void 0:o.id,title:e.runtime.title,model:e.runtime.model,reservedEditorAry:u?u.reservedEditorAry:void 0,configs:c,inputs:f,outputs:d},e.configPins&&e.configPins.forEach(t=>{c.push(t.hostId)}),n(t=>{l(t,e.id),f.push(t.hostId)},e.inputPins,e.inputPinsInModel,e.inputPinExts),n(t=>{y(t,e.id),d.push(t.hostId)},e.outputPins,e.outputPinsInModel,e.outputPinExts),e._autoRun&&(null===(r=s.rtType)||void 0===r?void 0:r.match(/^js/))){const o=t.parent?`${t.parent.id}-${t.id}`:"_rootFrame_";let n=a[o];n||(n=a[o]=[]),n.push({id:e.id,def:s})}e.frames&&e.frames.forEach(t=>{m(t)})}),t.frameAry&&t.frameAry.forEach(t=>{m(t)})};return m(e),{deps:i,coms:p,slot:o,comsAutoRun:a,inputs:s,outputs:c,cons:u,pinRels:f,pinProxies:d}}(t)}function d(t){return f(r(t).mainModule)}function u(t){return r(t)}}])}));